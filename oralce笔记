一、游标
1.oracle中，如果是动态游标，不能使用for cur in ..  loop..,只能显式声明游标 例如：
create or replace procedure mrcolin(
 ids in  varchar2
) is
       TYPE ref_cursor_type IS REF CURSOR;
       v_sql varchar2(5000);
       usr ref_cursor_type;
       v_budget t_budgetoutpayform%rowtype;
 begin
   v_sql:='select * from t_budgetoutpayform d where d.pdmsprojectid in('||ids||')';
   open usr for v_sql;
   loop 
     fetch usr into v_budget;
     exit when usr%notfound;
       dbms_output.put_line(v_budget.billid);  
   end loop;
   close usr;

end    mrcolin;

2.package的声明：包含两部分1是包声明，2是包体.包和包体要分开执行，否则会报错。
3.游标遍历方式 批量处理
   open 游标;
   loop
      fetch 游标 bulk collect  
       into 集合变量（也就是 table 类型哦） limit 数值; -- 一般 500 左右
       
       exit when 条件; -- cursor.count = 0
       逻辑处理;
    end loop;
    close 游标;

2. 隐式游标
   for x in (sql 语句) loop
      逻辑处理;
   end loop;

3. 单条处理
   open  游标;
   loop
      fetch 游标 
       into 变量;
     
       exit when 条件;
       逻辑处理;
   end loop;
   close 游标;
二、左连接 left join ，无论是多个left join 都是最左边的为主表，其他为子表，主表的数据全部展示，子表为满足条件以空值填充。（+）方式的连接对面为主表
三、分析函数group by rollup 小计和合计
select * from  (select  month,day,case when month is not null and day is not null and area is null then '日小计' 
  when month is not null and day is  null and area is null then '月小计 ' else area end as area, amt from (select  t.earnmonth day,t.area ,sum(t.personincome)amt ,substr(t.earnmonth,1,6)month from 
    earnings t group by rollup(substr(t.earnmonth,1,6), t.earnmonth,t.area ))) where area <>'日小计'  or area is null
